"use strict";var base_bubble=3,margin_range=5,width=1e3,height=600,filtTransTime=1e3,circle_catch_rad=20;Array.prototype.diff=function(a){return this.filter(function(t){return a.indexOf(t)<0})};var unique_parties=["Pakistan Tehreek-e-Insaf","Jamiat Ulama-e-Islam (F)","Qaumi Watan Party (Sherpao)","Awami National Party","Awami Jamhuri Ittehad Pakistan","Pakistan Muslim League (N)","Independent","Jamaat-e-Islami Pakistan","All Pakistan Muslim League","Awami Muslim League Pakistan","Pakistan Muslim League","Pakistan Muslim League(Z)","Pakistan Peoples Party Parliamentarians","National Peoples Party","Pakistan Muslim League (F)","Muttahida Qaumi Movement Pakistan","Pashtoonkhwa Milli Awami Party","National Party","Balochistan National Party"],parties_in_legend=["Pakistan Tehreek-e-Insaf","Jamiat Ulama-e-Islam (F)","Awami National Party","Pakistan Muslim League (N)","Independent","Pakistan Muslim League","Pakistan Peoples Party Parliamentarians","Pakistan Muslim League (F)","Muttahida Qaumi Movement Pakistan"],rest_parties=unique_parties.diff(parties_in_legend);function getCircleSize(a){return base_bubble+a/100*margin_range}function filterCircles(a,t,e){function i(i){return function(n){var r,l,s,c=(s=n.Province,(null==a||a.includes(s))&&(l=n.results[0].party,null==t||(t.includes("Rest")&&(t=(t=t.filter(function(a){return"Rest"!=a})).concat(rest_parties)),t.includes(l)))&&(r=n.voteMargin,null==e||e[0]<=r&&r<=e[1]));return 1==i?c:!c}}d3.selectAll(".naSeatCircle").filter(i(!0)).transition().duration(filtTransTime).attr("r",function(a){return a.radiusInit}),d3.selectAll(".naSeatCircle").filter(i(!1)).transition().duration(filtTransTime).attr("r",0),d3.selectAll(".circle-catcher").filter(i(!0)).transition("cicleCatchTrans").duration(filtTransTime).attr("r",function(a){return circle_catch_rad}).style("display","block"),d3.selectAll(".circle-catcher").filter(i(!1)).transition("cicleCatchTrans").duration(filtTransTime).attr("r",0).style("display","none");var n=d3.selectAll(".naSeatCircle").data().filter(i(!0));d3.selectAll(".clip.NAmap").data(voronoi.polygons(n),function(a){return a.data.seat}).attr("id",function(a){return null!=a?"clipNAmap"+a.data.seat:"clipNAmapNA"}).select("path").attr("class","clip-path-circle NAmap").call(redrawPolygon),d3.selectAll(".clip.NAmap").enter().append("clipPath").attr("class","clip NAmap").attr("id",function(a){return null!=a?"clipNAmap"+a.data.seat:"clipNAmapNA"}).append("path").attr("class","clip-path-circle NAmap").call(redrawPolygon),d3.selectAll(".clip.NAmap").exit().remove()}function redrawPolygon(a){a.attr("d",function(a){return a?"M"+a.join(",")+"Z":null})}var voronoi=d3.voronoi().x(function(a){return a.x}).y(function(a){return a.y}).extent([[0,0],[width,height]]);
